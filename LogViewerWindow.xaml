<Window x:Class="CCLS.LogViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CCLS"
        mc:Ignorable="d"
        Title="日志查询" Height="600" Width="900"
        WindowStartupLocation="CenterScreen">
    
    <!-- 使用App.xaml中定义的全局样式 -->
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 查询条件区域 -->
        <GroupBox Grid.Row="0" Header="查询条件" Style="{StaticResource MetroGroupBoxStyle}" Margin="10">
            <Grid Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- 第一行 -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="开始日期:" Style="{StaticResource MetroTextBlockStyle}" VerticalAlignment="Center" Margin="5"/>
                <DatePicker Grid.Row="0" Grid.Column="1" x:Name="StartDatePicker" Margin="5" VerticalAlignment="Center"/>
                
                <TextBlock Grid.Row="0" Grid.Column="2" Text="结束日期:" Style="{StaticResource MetroTextBlockStyle}" VerticalAlignment="Center" Margin="5"/>
                <DatePicker Grid.Row="0" Grid.Column="3" x:Name="EndDatePicker" Margin="5" VerticalAlignment="Center"/>
                
                <TextBlock Grid.Row="0" Grid.Column="4" Text="日志级别:" Style="{StaticResource MetroTextBlockStyle}" VerticalAlignment="Center" Margin="5"/>
                <ComboBox Grid.Row="0" Grid.Column="5" x:Name="LogLevelComboBox" Margin="5" VerticalAlignment="Center">
                    <ComboBoxItem Content="全部" IsSelected="True"/>
                    <ComboBoxItem Content="信息"/>
                    <ComboBoxItem Content="警告"/>
                    <ComboBoxItem Content="错误"/>
                </ComboBox>
                
                <!-- 第二行 -->
                <TextBlock Grid.Row="1" Grid.Column="0" Text="关键词:" Style="{StaticResource MetroTextBlockStyle}" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" x:Name="KeywordTextBox" Margin="5" VerticalAlignment="Center"/>
                
                <Button Grid.Row="1" Grid.Column="4" x:Name="SearchButton" Content="查询" Style="{StaticResource MetroButtonStyle}" Margin="5" Click="SearchButton_Click"/>
                <Button Grid.Row="1" Grid.Column="5" x:Name="ClearButton" Content="清除条件" Style="{StaticResource MetroButtonStyle}" Margin="5" Click="ClearButton_Click"/>
            </Grid>
        </GroupBox>
        
        <!-- 操作按钮区域 -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="10,5" HorizontalAlignment="Left">
            <Button x:Name="ExportButton" Content="导出日志" Style="{StaticResource MetroButtonStyle}" Margin="5" Click="ExportButton_Click"/>
            <Button x:Name="RefreshButton" Content="刷新" Style="{StaticResource MetroButtonStyle}" Margin="5" Click="RefreshButton_Click"/>
            <Button x:Name="DeleteButton" Content="删除选中日志" Style="{StaticResource MetroDangerButtonStyle}" Margin="5" Click="DeleteButton_Click"/>
        </StackPanel>
        
        <!-- 日志显示区域 -->
        <GroupBox Grid.Row="2" Header="日志列表" Style="{StaticResource MetroGroupBoxStyle}" Margin="10">
            <DataGrid x:Name="LogDataGrid" AutoGenerateColumns="False" IsReadOnly="True" 
                      CanUserAddRows="False" CanUserDeleteRows="False" SelectionMode="Extended" 
                      GridLinesVisibility="Horizontal" HeadersVisibility="Column" 
                      Style="{StaticResource MetroDataGridStyle}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="时间" Binding="{Binding Timestamp}" Width="150"/>
                    <DataGridTextColumn Header="级别" Binding="{Binding Level}" Width="80"/>
                    <DataGridTextColumn Header="消息" Binding="{Binding Message}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>
        
        <!-- 状态栏 -->
        <StatusBar Grid.Row="3" Style="{StaticResource MetroStatusBarStyle}">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="就绪" Style="{StaticResource MetroTextBlockStyle}"/>
            </StatusBarItem>
            <Separator Style="{StaticResource MetroSeparatorStyle}"/>
            <StatusBarItem>
                <TextBlock x:Name="CountText" Text="共 0 条记录" Style="{StaticResource MetroTextBlockStyle}"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>