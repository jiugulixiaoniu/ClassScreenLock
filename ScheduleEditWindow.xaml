<Window x:Class="CCLS.ScheduleEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CCLS"
        mc:Ignorable="d"
        Title="课表编辑器" Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Style="{DynamicResource MetroWindowStyle}">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles/MetroStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 顶部工具栏 -->
        <ToolBar Grid.Row="0" Background="{StaticResource MetroPrimaryBrush}" Foreground="{StaticResource MetroTextLightBrush}">
            <Button x:Name="SaveButton" Content="保存时间表" Style="{StaticResource MetroButtonStyle}" Click="SaveButton_Click"/>
            <Separator Style="{StaticResource MetroSeparatorStyle}"/>
            <Button x:Name="ExportButton" Content="导出为JSON" Style="{StaticResource MetroButtonStyle}" Click="ExportButton_Click"/>
        </ToolBar>
        
        <!-- 主内容区域 -->
        <Border Grid.Row="1" Margin="5" Background="{StaticResource MetroSurfaceBrush}" BorderBrush="{StaticResource MetroBorderBrush}" BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- 说明文字 -->
                <TextBlock Grid.Row="0" Text="课表设置 - 设置上课时间、教室和教师信息" Margin="5" FontWeight="Bold" FontSize="14"/>
                
                <!-- 时间设置区域 -->
                <GroupBox Grid.Row="1" Header="时间设置" Margin="5" Padding="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- 默认时间设置 -->
                        <Grid Grid.Row="0" Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="第一节开始:" VerticalAlignment="Center" Margin="5"/>
                            <TextBox Grid.Column="1" x:Name="DefaultStartTimeTextBox" Width="60" Margin="5" Text="07:00"/>
                            
                            <TextBlock Grid.Column="2" Text="课程时长(分钟):" VerticalAlignment="Center" Margin="5"/>
                            <TextBox Grid.Column="3" x:Name="ClassDurationTextBox" Width="60" Margin="5" Text="45"/>
                            
                            <TextBlock Grid.Column="4" Text="课间休息时长(分钟):" VerticalAlignment="Center" Margin="5"/>
                            <TextBox Grid.Column="5" x:Name="BreakDurationTextBox" Width="60" Margin="5" Text="10"/>
                            
                            <Button Grid.Column="6" x:Name="SaveDefaultTimesButton" Content="保存默认设置" Margin="5" Click="SaveDefaultTimesButton_Click" Style="{StaticResource MetroButtonStyle}"/>
                            <Button Grid.Column="7" x:Name="LoadDefaultTimesButton" Content="加载默认设置" Margin="5" Click="LoadDefaultTimesButton_Click" Style="{StaticResource MetroButtonStyle}"/>
                        </Grid>
                        
                        <!-- 快速添加按钮 -->
                        <Grid Grid.Row="1" Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Button Grid.Column="0" x:Name="AddClassButton" Content="添加上课时间段" Margin="5" Click="AddClassButton_Click" Style="{StaticResource MetroButtonStyle}"/>
                            <Button Grid.Column="1" x:Name="AddBreakButton" Content="添加课间休息" Margin="5" Click="AddBreakButton_Click" Style="{StaticResource MetroButtonStyle}"/>
                            <TextBlock Grid.Column="2" Text="提示：先设置默认时间，然后点击按钮添加时间段" VerticalAlignment="Center" Margin="5" Foreground="Gray"/>
                        </Grid>
                    </Grid>
                </GroupBox>
                
                <!-- 课程列表 -->
                <DataGrid Grid.Row="2" x:Name="AllClassesDataGrid" ItemsSource="{Binding AllClasses}" AutoGenerateColumns="False" CanUserAddRows="False" Margin="5" Background="{StaticResource MetroSurfaceBrush}" BorderBrush="{StaticResource MetroBorderBrush}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="时间段命名" Binding="{Binding ClassName}" Width="100"/>
                        <DataGridTextColumn Header="开始时间" Binding="{Binding StartTime, StringFormat='hh\\:mm\\:ss'}" Width="200"/>
                        <DataGridTextColumn Header="结束时间" Binding="{Binding EndTime, StringFormat='hh\\:mm\\:ss'}" Width="200"/>
                        <DataGridTextColumn Header="教师" Binding="{Binding Teacher}" Width="100"/>
                        <DataGridCheckBoxColumn Header="是否为课间休息" Binding="{Binding IsBreakTime}" Width="100"/>
                        <DataGridTemplateColumn Header="操作" Width="80">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="删除" Tag="{Binding}" Click="DeleteTimeSlotButton_Click" Style="{StaticResource MetroButtonStyle}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
        
        <!-- 底部状态栏 -->
        <StatusBar Grid.Row="2" Style="{StaticResource MetroStatusBarStyle}">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="就绪"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>